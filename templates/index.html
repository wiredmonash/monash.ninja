<!DOCTYPE html>
<html>
	<head>
		<title>Monash Ninja!</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

		<!--Materialize CSS & JS-->
	  	<!-- Compiled and minified CSS -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/css/materialize.min.css">

		<!-- Compiled and minified JavaScript -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/js/materialize.min.js"></script>
		
	  	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

		<script>

			$(document).ready(function() {
				$("#form").submit(function() {

					console.log("Posting... " + $("#code").val());
					
					console.log(JSON.stringify({code:"test"})); 
					
					code = $("#code").val();
					if (code == "") {
						$("#message").html("Please enter a code.");
						$("#message").removeClass("green lighten-1");
						$("#message").addClass("red lighten-1")

					} else {
						$.ajax({

							type: "POST",
							url: "/get",
							data: JSON.stringify({code: code}),
							contentType: 'application/json;charset=UTF-8',
							success: function(data) {
								if(data.status == "error") {
									$("#message").html("Invalid code.");
									$("#message").removeClass("green lighten-1")
									$("#message").addClass("red lighten-1")
								} else {
									$("#message").html("Code valid :)! Generating coupon..");
									$("#message").removeClass("red lighten-1")
									$("#message").addClass("green lighten-1")
								}
								console.log(data.status);
							}

						});
				
					}	

					event.preventDefault();

				});
			});

		</script>
	</head>

	<body>
		<!--<div class="container">
			<div class="content">
				<div id="message"></div>
				<form id="form" method="post">
					<label>Enter your Code:</label>
					<input type="text" id="code" name="code">
					<input type="submit" id="go" value="Go!">
				</form>
			</div>
		</div>-->
		<div class="container">
				<div class="row">
					<div class="col s6 offset-s4">
						<h3>Monash Ninja</h3>
						<img src='http://cdn.hugo.sx/8izA89eip.png' width="50%"><br />
						<div id="message" class="card"></div>
						<form id="form" method="post">
							<div class="input-field col s6">
								<input placeholder="12345" id="code" name="code" type="text">
								<label>Enter code:</label>
							</div>
							<div class="input-field col s6">
								<button class="btn waves-effect waves-light" type="submit" name="go" id="go">Submit
									<i class="material-icons right">send</i>
								 </button>
							 </div>
					 	</form>
					</div>
					<!--<div class="col s6 offset-s4">
						&copy; Hugo M&uuml;ller-Downing & Wired 2015. Clipart from <a href='http://cliparts.co/clipart/190198'>here</a>.
						
					</div>-->
				</div>
			</div>
		</div>

	</body>
</html>
